<html>
	<head>
		<style type='text/css'>

			body, html {
				margin: 0;
				height: 100%;
				overflow: hidden;
				text-align: left;
				background: url('ts.png') #000;
			}
			
			#pp {
				color: #fa0;
				font: 12px Tahoma;
				white-space: pre-wrap;
				padding: 8px;
				margin: 8px;
				width: 600px;
				background: rgb(5, 3, 1);
				border: 1px solid  #321;
			}

		</style>
		<script type="text/javascript">
			// Polyfills and compatibility ------------------------------------------------
			var decoder = decodeURIComponent || unescape;
			var addEventListenerKey = (document.addEventListener ? 'addEventListener' : 'attachEvent'); // IE8 handling for Wine users
			if(!Array.prototype.includes) {
				Array.prototype.includes = function(thing) {
					for(var i = 0; i < this.length; i++) {
						if(this[i] == thing) return true;
					}
					return false;
				}
			}
			if (!String.prototype.trim) {
				String.prototype.trim = function () {
					return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, '');
				};
			}
			/*\
			|*|
			|*|  Polyfill which enables the passage of arbitrary arguments to the
			|*|  callback functions of JavaScript timers (HTML5 standard syntax).
			|*|
			|*|  https://developer.mozilla.org/en-US/docs/DOM/window.setInterval
			|*|
			|*|  Syntax:
			|*|  var timeoutID = window.setTimeout(func, delay[, arg1, arg2, ...]);
			|*|  var timeoutID = window.setTimeout(code, delay);
			|*|  var intervalID = window.setInterval(func, delay[, arg1, arg2, ...]);
			|*|  var intervalID = window.setInterval(code, delay);
			|*|
			\*/
			(function() {
			  setTimeout(function(arg1) {
				if (arg1 === 'test') {
				  // feature test is passed, no need for polyfill
				  return;
				}
				var __nativeST__ = window.setTimeout;
				window.setTimeout = function(vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */ ) {
				  var aArgs = Array.prototype.slice.call(arguments, 2);
				  return __nativeST__(vCallback instanceof Function ? function() {
					vCallback.apply(null, aArgs);
				  } : vCallback, nDelay);
				};
			  }, 0, 'test');

			  var interval = setInterval(function(arg1) {
				clearInterval(interval);
				if (arg1 === 'test') {
				  // feature test is passed, no need for polyfill
				  return;
				}
				var __nativeSI__ = window.setInterval;
				window.setInterval = function(vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */ ) {
				  var aArgs = Array.prototype.slice.call(arguments, 2);
				  return __nativeSI__(vCallback instanceof Function ? function() {
					vCallback.apply(null, aArgs);
				  } : vCallback, nDelay);
				};
			  }, 0, 'test');
			}())


			if (window.location) {
				var anti_spam = []; // wow I wish I could use e.repeat but IE is dumb and doesn't have it.
				document[addEventListenerKey]("keydown", function(e) {
					if(e.target && (e.target.localName == "input" || e.target.localName == "textarea"))
						return;
					if(e.defaultPrevented)
						return; // do e.preventDefault() to prevent this behavior.
					if(e.which) {
						if(!anti_spam[e.which]) {
							anti_spam[e.which] = true;
							var key = String.fromCharCode(e.which);
							var x = event.x || event.clientX;
							var y = event.y || event.clientY;
							if(x || y ) // if either of these exist this is happening after a click
								return;
							window.location.href = "byond://winset?command=keyDown " + e.key;
						}
					}
				});
				document[addEventListenerKey]("keyup", function(e) {
					if(e.target && (e.target.localName == "input" || e.target.localName == "textarea"))
						return;
					if(e.defaultPrevented)
						return;
					if(e.which) {
						anti_spam[e.which] = false;
						var key = String.fromCharCode(e.which);
						var x = event.x || event.clientX;
						var y = event.y || event.clientY;
						if( x || y ) // if either of these exist this is happening after a click
							return;

						window.location.href = "byond://winset?command=keyUp " + e.key;
					}
				});
			}

			var cm = "";
			var i = 0;

			function set_cons(msg) {
				cm = msg;
				write_cons();
			}

			function write_cons() {
				if (i < cm.length) {
					document.getElementById("pp").innerHTML += cm.charAt(i);
					i++;
					setTimeout(write_cons, 1);
				} else {
					document.getElementById("pp").innerHTML = cm;
				}
			}
			
			function cls() {
				i = 0;
				document.getElementById("pp").innerHTML = "";
			}

		</script>
	</head>

	<body>
		<div id=pp></div>
	</body>

</html>